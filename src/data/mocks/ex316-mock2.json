{
  "examId": "ex316-2",
  "title": "OpenShift Virtualization Specialist (EX316) â€” Mock 2: Full Spectrum Exam II",
  "description": "A comprehensive 13-task exam covering a wide range of objectives including migration, high availability, and advanced networking.",
  "timeLimit": "4 hours",
  "tasks": [
    {
      "id": "task01",
      "title": "Migrate a VM from VMware vSphere",
      "sections": [
        {
          "title": "Migration Toolkit and Execution",
          "notice": "Migrate a VM named 'legacy-erp' from a simulated vSphere environment into a new namespace 'erp-prod'.",
          "subtasks": [
            "Create a new namespace named 'erp-prod'.",
            "Install the 'Migration Toolkit for Virtualization' Operator.",
            "Configure a 'Provider' resource to connect to the mock vSphere environment.",
            "Create a 'Plan' to migrate the 'legacy-erp' VM, mapping source networks and datastores to OpenShift targets.",
            "Execute the migration and verify the new VM is running in the 'erp-prod' namespace."
          ]
        }
      ]
    },
    {
      "id": "task02",
      "title": "Configure High Availability for the Migrated VM",
      "sections": [
        {
          "title": "Eviction Strategy and Health Probes",
          "notice": "Ensure the 'legacy-erp' VM is resilient to node failures. Perform actions in the 'erp-prod' namespace.",
          "subtasks": [
            "Edit the 'legacy-erp' VM and set its 'evictionStrategy' to 'LiveMigrateIfPossible'.",
            "Add a liveness probe that performs a TCP socket check on port 8080.",
            "Add a watchdog device to the VM using the 'i6300esb' model."
          ]
        }
      ]
    },
    {
      "id": "task03",
      "title": "Expose the Migrated VM and Configure RBAC",
      "sections": [
        {
          "title": "Service, Route, and User Management",
          "notice": "Expose the ERP application and create a user with limited permissions. Perform actions in the 'erp-prod' namespace.",
          "subtasks": [
            "Create a NodePort service to expose port 8080 of the 'legacy-erp' VM.",
            "Create a user named 'erp-support'.",
            "Create a Role that allows this user to view all resources in the 'erp-prod' namespace but modify none.",
            "Bind the Role to the 'erp-support' user."
          ]
        }
      ]
    },
    {
      "id": "task04",
      "title": "Deploy a Highly Available Database Cluster",
      "sections": [
        {
          "title": "VM Deployment and Anti-Affinity",
          "notice": "Deploy a two-node database cluster in a new 'shared-db' namespace, ensuring nodes run on separate physical hosts.",
          "subtasks": [
            "Create a new namespace named 'shared-db'.",
            "Deploy two VMs, 'db-node1' and 'db-node2', with the label 'app=db-cluster'.",
            "Add a required 'podAntiAffinity' rule to both VMs to prevent them from being scheduled on the same node."
          ]
        }
      ]
    },
    {
      "id": "task05",
      "title": "Configure Shared and Local Storage for the Database Cluster",
      "sections": [
        {
          "title": "Multi-Tier Storage Configuration",
          "notice": "The database cluster requires both shared and local storage. Perform actions in the 'shared-db' namespace.",
          "subtasks": [
            "Create a 10Gi PVC named 'db-shared-vol' with 'ReadWriteMany' access mode.",
            "Attach this shared PVC to both 'db-node1' and 'db-node2'.",
            "For each VM, also create and attach a dedicated 15Gi 'ReadWriteOnce' PVC for local data."
          ]
        }
      ]
    },
    {
      "id": "task06",
      "title": "Create a Custom Template with Cloud-Init",
      "sections": [
        {
          "title": "Database Node Template",
          "notice": "Create a template from 'db-node1' for future database deployments. Perform actions in the 'shared-db' namespace.",
          "subtasks": [
            "Generate a template named 'db-node-template' from the 'db-node1' VM.",
            "Modify the template to use cloud-init to set a custom SSH key for the 'cloud-user'."
          ]
        }
      ]
    },
    {
      "id": "task07",
      "title": "Perform a Snapshot and Restore of a Database Node",
      "sections": [
        {
          "title": "Backup and Recovery Drill",
          "notice": "Test the snapshot functionality on 'db-node2'. Perform actions in the 'shared-db' namespace.",
          "subtasks": [
            "Create a snapshot of the 'db-node2' VM.",
            "Delete the VM after the snapshot is complete.",
            "Restore the VM from the snapshot."
          ]
        }
      ]
    },
    {
      "id": "task08",
      "title": "Clone the ERP VM for testing",
      "sections": [
        {
          "title": "Cloning for UAT",
          "notice": "Create a clone of the 'legacy-erp' VM in a new 'erp-uat' namespace.",
          "subtasks": [
            "Create a new namespace named 'erp-uat'.",
            "Clone the 'legacy-erp' VM from the 'erp-prod' namespace into the 'erp-uat' namespace.",
            "Name the new VM 'erp-uat-clone'."
          ]
        }
      ]
    },
    {
      "id": "task09",
      "title": "Configure a Multi-Homed Analytics VM",
      "sections": [
        {
          "title": "Multus and NMState Configuration",
          "notice": "Deploy a VM in a new 'analytics' namespace that connects to a dedicated analytics network.",
          "subtasks": [
            "Create a new namespace named 'analytics'.",
            "Use the NMState operator to create a new linux-bridge named 'br-analytics' on all worker nodes.",
            "Create a NetworkAttachmentDefinition named 'analytics-net' that uses the 'br-analytics' bridge.",
            "Deploy a VM named 'analytics-vm' and attach it to the 'analytics-net'."
          ]
        }
      ]
    },
    {
      "id": "task10",
      "title": "Perform Node Maintenance on an Analytics Node",
      "sections": [
        {
          "title": "Node Drain",
          "notice": "The node hosting 'analytics-vm' must be drained for maintenance.",
          "subtasks": [
            "Identify the node where 'analytics-vm' is running.",
            "Drain the node, ensuring the VM is live-migrated without downtime."
          ]
        }
      ]
    },
    {
      "id": "task11",
      "title": "Import an OVA Image",
      "sections": [
        {
          "title": "Importing a Vendor Appliance",
          "notice": "Import a vendor appliance from 'http://vendor.com/appliance.ova' into the 'analytics' namespace.",
          "subtasks": [
            "Create a DataVolume in the 'analytics' namespace configured to import from the OVA URL.",
            "Verify the associated VM is created automatically."
          ]
        }
      ]
    },
    {
      "id": "task12",
      "title": "Detach a Disk from the Analytics VM",
      "sections": [
        {
          "title": "Storage Management",
          "notice": "The 'analytics-vm' has a temporary disk that needs to be removed. Perform actions in the 'analytics' namespace.",
          "subtasks": [
            "Add a new 2Gi data volume to 'analytics-vm' named 'temp-data'.",
            "Shut down the VM.",
            "Remove the 'temp-data' volume from the VM definition.",
            "Start the VM."
          ]
        }
      ]
    },
    {
      "id": "task13",
      "title": "Install a custom package on the Analytics VM",
      "sections": [
        {
          "title": "Basic System Administration",
          "notice": "Install a custom analytics package on the 'analytics-vm'. To do this, first configure a custom repository inside the VM. Create the file '/etc/yum.repos.d/analytics.repo' with the following content: [analytics]\nname=Analytics Repo\nbaseurl=http://repo.example.com/analytics_packages\nenabled=1\ngpgcheck=0. Perform actions in the 'analytics' namespace.",
          "subtasks": [
            "Log into the 'analytics-vm'.",
            "Install the 'custom-analytics-tool' package using the provided repository details."
          ]
        }
      ]
    }
  ]
}
