
{
  "examId": "ex316-6",
  "title": "OpenShift Virtualization Specialist (EX316) â€” Mock 6: Troubleshooting and Advanced Features",
  "description": "This final exam tests your ability to troubleshoot complex issues and use advanced or less common features of OpenShift Virtualization.",
  "timeLimit": "4 hours",
  "tasks": [
    {
      "id": "task01",
      "title": "Troubleshoot a VM that fails to start due to a misconfigured NetworkPolicy",
      "sections": [
        {
          "title": "Debugging Network Policy",
          "notice": "A VM named 'backend-api' is unable to start correctly because it cannot reach a required licensing service. A NetworkPolicy is suspected.",
          "subtasks": [
            "Deploy the 'backend-api' VM. It is pre-configured to require network access on boot.",
            "Observe that the VM fails its readiness checks and enters a loop.",
            "Inspect the NetworkPolicies in the namespace and identify one that is blocking egress traffic from the VM.",
            "Modify or delete the NetworkPolicy to allow the necessary egress traffic, allowing the VM to start."
          ]
        }
      ]
    },
    {
      "id": "task02",
      "title": "Access a VM with a broken network interface using its serial console",
      "sections": [
        {
          "title": "Serial Console Access",
          "notice": "An administrator has accidentally misconfigured the network interface of 'backend-api' from within the guest OS. You can no longer SSH into it.",
          "subtasks": [
            "Use the 'virtctl console' command to access the serial console of the 'backend-api' VM.",
            "Log into the VM using the console.",
            "Diagnose and repair the network configuration file within the guest OS.",
            "Reboot the VM and verify that it now has network connectivity."
          ]
        }
      ]
    },
    {
      "id": "task03",
      "title": "Upload a custom disk image to a PVC using 'virtctl'",
      "sections": [
        {
          "title": "CLI Image Upload",
          "notice": "You have been given a custom OS image file named 'custom.qcow2'. Upload it to a PVC to be used by a new VM.",
          "subtasks": [
            "Create a new, blank PVC named 'custom-image-pvc' of sufficient size.",
            "Use the 'virtctl image-upload' command to upload the 'custom.qcow2' file to the PVC.",
            "Monitor the upload progress to completion.",
            "Deploy a new VM that uses this PVC as its boot disk."
          ]
        }
      ]
    },
    {
      "id": "task04",
      "title": "Configure a VM to use SR-IOV for high-performance networking",
      "sections": [
        {
          "title": "SR-IOV Configuration",
          "notice": "A network-intensive application requires the low latency provided by an SR-IOV virtual function.",
          "subtasks": [
            "Ensure the SR-IOV Network Operator is installed and has configured VFs on a worker node.",
            "Create a NetworkAttachmentDefinition for the SR-IOV network pool.",
            "Create a new VM named 'sriov-vm'.",
            "Add a network interface to the VM that is attached to the SR-IOV NAD."
          ]
        }
      ]
    },
    {
      "id": "task05",
      "title": "Troubleshoot a live migration that fails due to incompatible CPU models",
      "sections": [
        {
          "title": "Debugging Migration Failure",
          "notice": "A live migration is failing for a VM with a specific CPU model.",
          "subtasks": [
            "Create a VM with a CPU model that is not available on all nodes (e.g., by specifying a feature flag).",
            "Attempt to live migrate the VM to a node with an incompatible CPU.",
            "Examine the VMI events and virt-handler logs to diagnose the failure reason.",
            "Change the VM's CPU model to a more generic one (like 'host-model') and successfully complete the migration."
          ]
        }
      ]
    },
    {
      "id": "task06",
      "title": "Perform an emergency, forceful stop of a non-responsive VM",
      "sections": [
        {
          "title": "Force Deletion",
          "notice": "A VM is stuck in the 'Terminating' state and is not shutting down.",
          "subtasks": [
            "Attempt to stop a VM using the standard 'virtctl stop' command.",
            "When it fails to stop, use the '--force' option with a grace period of 0 seconds.",
            "Verify the VMI and its associated pod are forcefully deleted."
          ]
        }
      ]
    },
    {
      "id": "task07",
      "title": "Attach a secret to a VM as a virtual floppy disk",
      "sections": [
        {
          "title": "Secure Credential Injection",
          "notice": "A legacy application needs a license key file at boot time. Provide it securely using a secret.",
          "subtasks": [
            "Create a Kubernetes Secret containing the license key data.",
            "Create a new VM.",
            "Define a volume in the VM spec that references the secret.",
            "Attach the volume as a 'floppy' disk device.",
            "Boot the VM and verify the license key is readable from the floppy drive."
          ]
        }
      ]
    },
    {
      "id": "task08",
      "title": "Configure a VM to use a container image as its root disk",
      "sections": [
        {
          "title": "ContainerDisk VM",
          "notice": "Deploy a lightweight VM whose operating system is stored in a container image.",
          "subtasks": [
            "Find a suitable container disk image from a public registry.",
            "Create a new VirtualMachine resource.",
            "In the volumes section, define a 'containerDisk' volume pointing to the image URL.",
            "Configure this volume as the VM's boot disk and start the VM."
          ]
        }
      ]
    },
    {
      "id": "task09",
      "title": "Manually edit the HyperConverged resource to enable an alpha feature",
      "sections": [
        {
          "title": "Feature Gates",
          "notice": "Enable the 'withHostPassthroughCPU' feature gate to allow host-passthrough CPU model.",
          "subtasks": [
            "Edit the 'HyperConverged' custom resource in the 'openshift-cnv' namespace.",
            "Add the 'withHostPassthroughCPU' feature gate to the spec.",
            "Save the changes and wait for the virtualization components to redeploy.",
            "Create a new VM with the 'host-passthrough' CPU model and verify it works."
          ]
        }
      ]
    },
    {
      "id": "task10",
      "title": "Troubleshoot a VM that has a 'CrashLoopBackOff' status",
      "sections": [
        {
          "title": "Pod-Level Debugging",
          "notice": "The virt-launcher pod for a VM is continuously crashing. Find and fix the root cause.",
          "subtasks": [
            "Create a VM that references a non-existent PVC as its disk to induce an error.",
            "Observe the 'CrashLoopBackOff' status on the virt-launcher pod.",
            "Use 'oc logs' on the pod to find the error message related to the missing volume.",
            "Correct the VM definition to point to a valid PVC and verify it starts."
          ]
        }
      ]
    },
    {
      "id": "task11",
      "title": "Use 'virtctl' to expose a VM service on a random port",
      "sections": [
        {
          "title": "CLI Service Exposure",
          "notice": "Quickly expose a port on a VM for temporary access without writing a full Service manifest.",
          "subtasks": [
            "Create a simple VM with a service running on a known port (e.g., port 8000).",
            "Use the 'virtctl expose' command.",
            "Specify the VM name, the target port, and set the type to 'NodePort'.",
            "Verify a service is created and the VM is accessible via the assigned node port."
          ]
        }
      ]
    },
    {
      "id": "task12",
      "title": "Configure disk I/O throttling for a VM",
      "sections": [
        {
          "title": "Resource Limiting",
          "notice": "A low-priority batch processing VM is consuming too much storage I/O. Limit its IOPS.",
          "subtasks": [
            "Create a VM named 'batch-vm'.",
            "Edit the VirtualMachine resource.",
            "In the disk definition, add an 'io' block and set the 'tps' (transactions per second) to a low value (e.g., 50).",
            "Verify the setting is applied by observing the generated VMI XML."
          ]
        }
      ]
    },
    {
      "id": "task13",
      "title": "Add a custom SSH key to a running VM using 'virtctl'",
      "sections": [
        {
          "title": "Dynamic User Access",
          "notice": "You need temporary SSH access to a running VM that you don't have credentials for.",
          "subtasks": [
            "Ensure the QEMU guest agent is running on the target VM.",
            "Have a local SSH key pair available on your client machine.",
            "Use 'virtctl ssh' with the '--local-ssh-key' flag pointing to your public key.",
            "Verify you can log in to the VM without a password."
          ]
        }
      ]
    },
    {
      "id": "task14",
      "title": "Troubleshoot a DataVolume stuck in 'Pending' state",
      "sections": [
        {
          "title": "Storage Debugging",
          "notice": "A DataVolume is not progressing. Diagnose the cause.",
          "subtasks": [
            "Create a DataVolume that tries to import from an HTTP URL that does not exist.",
            "Observe the DataVolume remains in a pending state.",
            "Describe the DataVolume and check its events for errors related to the import process.",
            "Examine the logs of the 'cdi-importer' pod to find the specific connection error."
          ]
        }
      ]
    },
    {
      "id": "task15",
      "title": "Change the default boot order of a VM",
      "sections": [
        {
          "title": "Boot Order Configuration",
          "notice": "A VM needs to boot from a secondary network interface to receive a PXE boot image.",
          "subtasks": [
            "Create a VM with a standard disk and a secondary network interface.",
            "Edit the VirtualMachine resource.",
            "In the 'domain.devices' section, set the boot order for the network interface to 1.",
            "Set the boot order for the disk to 2.",
            "Start the VM and observe from the console that it attempts to PXE boot first."
          ]
        }
      ]
    }
  ]
}
