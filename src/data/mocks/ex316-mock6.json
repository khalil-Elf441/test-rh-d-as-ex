{
  "examId": "ex316-6",
  "title": "OpenShift Virtualization Specialist (EX316) â€” Mock 6: Troubleshooting and Advanced Features",
  "description": "This final exam tests your ability to troubleshoot complex issues and use advanced or less common features of OpenShift Virtualization.",
  "timeLimit": "4 hours",
  "tasks": [
    {
      "id": "task01",
      "title": "Troubleshoot a VM that fails to start due to a misconfigured NetworkPolicy",
      "sections": [
        {
          "title": "Debugging Network Policy",
          "notice": "In a new namespace 'corp-api', a pre-existing NetworkPolicy is blocking a new VM from starting correctly. Find and fix the issue.",
          "subtasks": [
            "Create a new namespace named 'corp-api'.",
            "A NetworkPolicy named 'default-deny-all' has been pre-created in this namespace. Inspect it.",
            "Deploy a new VM named 'backend-vm' that needs to contact an external service on port 443 to boot.",
            "Observe that the VM fails its readiness checks.",
            "Create a new NetworkPolicy to allow egress traffic on port 443 for the 'backend-vm', allowing it to start."
          ]
        }
      ]
    },
    {
      "id": "task02",
      "title": "Access a VM with a broken network interface using its serial console",
      "sections": [
        {
          "title": "Serial Console Access",
          "notice": "An administrator has accidentally misconfigured the network interface of 'backend-vm' from within the guest OS. You can no longer SSH into it. Perform actions in the 'corp-api' namespace.",
          "subtasks": [
            "Use the 'virtctl console' command to access the serial console of the 'backend-vm' VM.",
            "Log into the VM using the console.",
            "Diagnose and repair the network configuration file within the guest OS.",
            "Reboot the VM and verify that it now has network connectivity."
          ]
        }
      ]
    },
    {
      "id": "task03",
      "title": "Upload a custom disk image to a PVC using 'virtctl'",
      "sections": [
        {
          "title": "CLI Image Upload",
          "notice": "You have been given a custom OS image file named 'custom.qcow2'. In a new namespace 'custom-images', upload it to a PVC to be used by a new VM.",
          "subtasks": [
            "Create a new namespace named 'custom-images'.",
            "Create a new, blank 20Gi PVC named 'custom-os-pvc'.",
            "Use the 'virtctl image-upload' command to upload the 'custom.qcow2' file to the PVC.",
            "Deploy a new VM named 'custom-vm' that uses this PVC as its boot disk."
          ]
        }
      ]
    },
    {
      "id": "task04",
      "title": "Configure a VM to use SR-IOV for high-performance networking",
      "sections": [
        {
          "title": "SR-IOV Configuration",
          "notice": "A network-intensive application requires the low latency provided by an SR-IOV virtual function. Deploy it in a new namespace 'hpc-workloads'.",
          "subtasks": [
            "Create a new namespace named 'hpc-workloads'.",
            "Ensure the SR-IOV Network Operator is installed and has configured VFs on a worker node.",
            "Create a NetworkAttachmentDefinition for the SR-IOV network pool.",
            "Create a new VM named 'sriov-vm' in the 'hpc-workloads' namespace.",
            "Add a network interface to the VM that is attached to the SR-IOV NAD."
          ]
        }
      ]
    },
    {
      "id": "task05",
      "title": "Troubleshoot a live migration that fails due to incompatible CPU models",
      "sections": [
        {
          "title": "Debugging Migration Failure",
          "notice": "A live migration is failing for a VM with a specific CPU model. Perform actions in the 'hpc-workloads' namespace.",
          "subtasks": [
            "Edit the 'sriov-vm' to request a CPU feature that is not available on all nodes.",
            "Attempt to live migrate the VM to a node with an incompatible CPU.",
            "Examine the VMI events and virt-handler logs to diagnose the failure reason.",
            "Change the VM's CPU model to a more generic one (like 'host-model') and successfully complete the migration."
          ]
        }
      ]
    },
    {
      "id": "task06",
      "title": "Configure disk I/O throttling and RBAC for a user",
      "sections": [
        {
          "title": "Resource Limiting and User Permissions",
          "notice": "A user 'developer' is deploying resource-intensive VMs. Limit their disk I/O and restrict their permissions in a new namespace 'dev-sandbox'.",
          "subtasks": [
            "Create a new namespace named 'dev-sandbox'.",
            "Create a user named 'developer'.",
            "Create a Role that allows the user to create and manage VMs, but not services or routes.",
            "Bind this role to the 'developer' user in the 'dev-sandbox' namespace.",
            "Deploy a VM named 'dev-vm' in the namespace.",
            "Edit the VM to set a disk I/O limit (tps) of 100 on its primary disk."
          ]
        }
      ]
    },
    {
      "id": "task07",
      "title": "Configure a VM to use a container image as its root disk",
      "sections": [
        {
          "title": "ContainerDisk VM",
          "notice": "Deploy a lightweight VM whose operating system is stored in a container image. Perform actions in the 'dev-sandbox' namespace.",
          "subtasks": [
            "Find a suitable container disk image from a public registry.",
            "Create a new VirtualMachine resource named 'container-disk-vm'.",
            "In the volumes section, define a 'containerDisk' volume pointing to the image URL.",
            "Configure this volume as the VM's boot disk and start the VM."
          ]
        }
      ]
    },
    {
      "id": "task08",
      "title": "Troubleshoot a VM that has a 'CrashLoopBackOff' status",
      "sections": [
        {
          "title": "Pod-Level Debugging",
          "notice": "The virt-launcher pod for a VM is continuously crashing. Find and fix the root cause in the 'dev-sandbox' namespace.",
          "subtasks": [
            "Create a VM that references a non-existent ConfigMap as a volume to induce an error.",
            "Observe the 'CrashLoopBackOff' status on the virt-launcher pod.",
            "Use 'oc logs' on the pod to find the error message related to the missing resource.",
            "Correct the VM definition by removing the invalid volume and verify it starts."
          ]
        }
      ]
    },
    {
      "id": "task09",
      "title": "Use 'virtctl' to expose a VM service on a random port",
      "sections": [
        {
          "title": "CLI Service Exposure",
          "notice": "Quickly expose a port on 'dev-vm' for temporary access without writing a full Service manifest. Perform actions in the 'dev-sandbox' namespace.",
          "subtasks": [
            "Use the 'virtctl expose' command on the 'dev-vm' VM.",
            "Specify the VM name, a target port of 8080, and set the type to 'NodePort'.",
            "Verify a service is created and the VM is accessible via the assigned node port."
          ]
        }
      ]
    },
    {
      "id": "task10",
      "title": "Change the default boot order of a VM",
      "sections": [
        {
          "title": "Boot Order Configuration",
          "notice": "A VM needs to boot from a secondary network interface to receive a PXE boot image. Perform actions in the 'dev-sandbox' namespace.",
          "subtasks": [
            "Create a VM with a standard disk and a secondary network interface.",
            "Edit the VirtualMachine resource.",
            "In the 'domain.devices' section, set the boot order for the network interface to 1.",
            "Set the boot order for the disk to 2.",
            "Start the VM and observe from the console that it attempts to PXE boot first."
          ]
        }
      ]
    }
  ]
}